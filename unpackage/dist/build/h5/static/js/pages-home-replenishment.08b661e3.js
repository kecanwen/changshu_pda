(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-replenishment"],{"39e6":function(e,t,i){"use strict";i.r(t);var a=i("c6a0"),n=i("401e");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o,r=i("f0c5"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"50afb284",null,!1,a["a"],o);t["default"]=l.exports},"401e":function(e,t,i){"use strict";i.r(t);var a=i("cf78"),n=i.n(a);for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);t["default"]=n.a},c6a0:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-form",{staticStyle:{margin:"3rem"},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.onSubmit.apply(void 0,arguments)}}},[i("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:1==e.i18n.length[1],expression:"i18n.length[1]==1"}],attrs:{required:!0}},[i("van-field",{attrs:{label:e.i18n.length[0]},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.lengthOnChange.apply(void 0,arguments)}},model:{value:e.length,callback:function(t){e.length=t},expression:"length"}})],1),i("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:1==e.i18n.type[1],expression:"i18n.type[1]==1"}]},[i("van-select",{attrs:{label:e.i18n.type[0],placeholder:e.i18n.typeMsg,columns:e.types},on:{defclick:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),i("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:1==e.i18n.height[1],expression:"i18n.height[1]==1"}],attrs:{required:!0}},[i("van-select",{attrs:{label:e.i18n.height[0],placeholder:e.i18n.heightMsg,columns:e.heights},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1),i("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:1==e.i18n.code[1],expression:"i18n.code[1]==1"}]},[i("van-field",{attrs:{label:e.i18n.code[0],readonly:!!e.status&&"readonly"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.getMaterial.apply(void 0,arguments)}},model:{value:e.barcode,callback:function(t){e.barcode=t},expression:"barcode"}}),i("van-field",{attrs:{autosize:!0,readonly:!0},model:{value:e.material,callback:function(t){e.material=t},expression:"material"}})],1),i("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:1==e.i18n.quantity[1],expression:"i18n.quantity[1]==1"}]},[i("van-field",{attrs:{label:e.i18n.quantity[0],readonly:!e.status&&"readonly"},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1),i("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:1==e.i18n.location[1],expression:"i18n.location[1]==1"}]},[i("van-select",{attrs:{label:e.i18n.location[0],placeholder:e.i18n.typeMsg,rules:[{required:!0,message:e.i18n.locationMsg}],required:!0,columns:e.docks},on:{defclick:function(t){arguments[0]=t=e.$handleEvent(t),e.receiveLocOnChange.apply(void 0,arguments)}},model:{value:e.dock,callback:function(t){e.dock=t},expression:"dock"}})],1),i("div",{staticStyle:{margin:"16px"}},[i("van-button",{attrs:{loading:e.loading,round:!0,block:!0,type:"info","native-type":"submit"}},[e._v(e._s(e.i18n.submit))])],1)],1)},s=[]},cf78:function(e,t,i){"use strict";var a=i("4ea4");i("c975"),i("d81d"),i("a9e3"),i("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("d1d8")),s=a(i("20b5")),o=i("4247"),r={components:{"van-select":n.default},data:function(){return{type:this.$t("replenish").types[0],types:this.$t("replenish").types,barcode:"",materialCode:"",material:"",quantity:"",dockId:"",dock:"",docks:[],dockList:[],loading:!1,status:!1,length:"",height:"",heights:this.$t("replenish").heights}},computed:{i18n:function(){return this.$t("replenish")}},mounted:function(){uni.setNavigationBarTitle({title:this.$t("replenish").title})},onLoad:function(){this.getLocations()},watch:{length:function(e){0!==e.trim().length&&this.debounce(this.lengthOnChange,2e3)}},methods:{getLocations:function(){var e=this;s.default.post(this.apiUrl.apiUrl+"/api/app/queryManager/Dock",{condition:{isShip:{"=":"Y"}},pageNumber:1,pageSize:100,queryType:2,sort:{XCode:!1}}).then((function(t){e.dockList=t.data.data,e.docks=[],t.data.data.map((function(t){var i=t.xCode;e.docks.push(i)})),e.dockList.length>0&&(e.dockId=e.dockList[0].id,e.dock=e.dockList[0].xCode)})).catch((function(t){(0,o.Toast)({message:e.$t("replenish").locationErrorMsg})}))},onChange:function(e){this.types[e]==this.$t("replenish").types[0]?(this.quantity="",this.status=!1):(this.barcode="",this.materialCode="",this.material="",this.quantity=1,this.status=!0)},getMaterial:function(){var e=this,t={condition:{xCode:{"=":this.barcode}},pageNumber:1,pageSize:1,queryType:2};void 0!=this.$t("replenish").isBarcode&&1==this.$t("replenish").isBarcode&&(t={condition:{barcode:{"=":this.barcode}},pageNumber:1,pageSize:1,queryType:2}),s.default.post(this.apiUrl.apiUrl+"/api/app/queryManager/Material",t).then((function(t){t.data.data.length>0&&(e.materialCode=t.data.data[0].xCode,e.material=t.data.data[0].xCode+" "+t.data.data[0].xName+" "+t.data.data[0].spec)})).catch((function(t){(0,o.Toast)({message:e.$t("replenish").materialErrorMsg})}))},receiveLocOnChange:function(e){this.dockId=this.dockList[e].id},onSubmit:function(){this.loading=!0;var e=this;if(""!=this.length&&Number(this.length)+this.$t("replenish").length[4]>this.$t("replenish").length[3])return this.loading=!0,void(0,o.Toast)({message:e.$t("replenish").lengthErrorMsg});var t=this.$t("replenish").typeCodes[this.types.indexOf(this.type)],i="material"==t?this.materialCode:t,a={materialCode:i,quantity:"material"!=t?this.quantity:0,toDockId:this.dockId};if(""!=this.height&&(a["materialPropertyDto"]={m_Str1:this.$t("replenish").heightCodes[this.heights.indexOf(this.height)]}),this.$t("replenish").isGetDDJ)s.default.get(this.apiUrl.middleapiUrl+"/WCSService/GetLanyWay").then((function(i){a["materialPropertyDto"]={m_Str1:e.$t("replenish").heightCodes[e.heights.indexOf(e.height)],m_Str2:i.data};var n="/api/app/autoOutboundManager/autoShip";"material"==t&&(n="/api/app/autoOutboundManager/replenishment"),s.default.post(e.apiUrl.apiUrl+n,a).then((function(i){e.loading=!1,"material"!=t?(e.barcode="",e.materialCode="",e.material="",e.quantity=1,e.status=!0):(e.quantity="",e.status=!1),("material"!=t&&1==i.data||"material"==t&&i.data.length>0)&&((0,o.Toast)({message:e.$t("replenish").replenishSuccessMsg}),e.length="",e.height="")})).catch((function(t){e.loading=!1,(0,o.Toast)({message:e.$t("replenish").replenishErrorMsg})}))})).catch((function(t){e.loading=!1,(0,o.Toast)({message:e.$t("replenish").lanyErrorMsg})}));else{var n="/api/app/autoOutboundManager/autoShip";"material"==t&&(n="/api/app/autoOutboundManager/replenishment"),s.default.post(this.apiUrl.apiUrl+n,a).then((function(i){e.loading=!1,"material"!=t?(e.barcode="",e.materialCode="",e.material="",e.quantity=1,e.status=!0):(e.quantity="",e.status=!1),("material"!=t&&1==i.data||"material"==t&&i.data.length>0)&&((0,o.Toast)({message:e.$t("replenish").replenishSuccessMsg}),e.length="",e.height="")})).catch((function(t){e.loading=!1,(0,o.Toast)({message:e.$t("replenish").replenishErrorMsg})}))}},debounce:function(e,t){null!==this.fun&&clearTimeout(this.fun),this.fun=setTimeout(e,t)},lengthOnChange:function(){Number(this.length)+this.$t("replenish").length[4]<=this.$t("replenish").length[2]?(this.materialCode=this.$t("replenish").typeCodes[1],this.material=this.types[1],this.type=this.types[1],this.onChange(),this.heights=this.$t("replenish").heights):Number(this.length)+this.$t("replenish").length[4]<=this.$t("replenish").length[3]?(this.materialCode=this.$t("replenish").typeCodes[2],this.material=this.types[2],this.type=this.types[2],this.onChange(),this.heights=this.$t("replenish").heights2):this.type=""}}};t.default=r}}]);